(this.webpackJsonpnewt=this.webpackJsonpnewt||[]).push([[0],{107:function(e,t,a){},108:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(7),c=a.n(r),l=(a(88),a(68)),i=a(10),o=(a(89),a(16)),m=a(17),u=a(19),h=a(18),p=a(14),d=a.n(p),f=(a(107),a(63)),v=a.n(f),g=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.hash.split("access_token=").pop().split("&")[0];if(localStorage.access_token=t,t.length>0){var a={headers:{Authorization:"Bearer ".concat(t)}};d.a.get("https://api.spotify.com/v1/me",a).then((function(e){var t=e.data.id;localStorage.id=t})),setTimeout((function(){return e.props.history.push("/home")}),1e3)}}},{key:"render",value:function(){return s.a.createElement("div",{className:"auth_page"},s.a.createElement("div",{className:"auth_text"},s.a.createElement("h1",null,"Authentification"),s.a.createElement("div",null,s.a.createElement("a",{href:"https://accounts.spotify.com/authorize?response_type=token&scope=playlist-modify-public playlist-modify-private&client_id=de2017d063ae4b7d87f7d52b9d8c7d31&redirect_uri=http://localhost:3000/auth"},"Se connecter"))),s.a.createElement("div",{className:"auth_image_container"},s.a.createElement("div",{className:"auth_image"},s.a.createElement("div",{className:"auth_image_content"},s.a.createElement("img",{src:v.a,alt:"Logo spotify",className:"logo_spotify"}),s.a.createElement("div",{className:"text_spotify"},"Spotify")))))}}]),a}(n.Component),E=a(167),y=a(41),k=a(170),b=a(171),N=a(168),S=a(169),C=a(159),_=a(44),O=(a(108),a(172)),j=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).activateform=function(){n.setState({formisactiv:!n.state.formisactiv})},n.handleChange=function(e){var t;n.setState((t={},Object(_.a)(t,e.target.name,e.target.value),Object(_.a)(t,e.target.description,e.target.value),t))},n.searchPlaylist=function(e){e.preventDefault();var t=localStorage.id,a=localStorage.access_token;if(a&&t){var s={headers:{Authorization:"Bearer ".concat(a)}};d.a.post("https://api.spotify.com/v1/users/"+t+"/playlists",{name:n.state.name,description:n.state.description},s).then((function(e){return console.log(e)}))}},n.state={formisactiv:!1,name:"",description:""},n}return Object(m.a)(a,[{key:"render",value:function(){return console.log(this.state.name),console.log(this.state.description),s.a.createElement("div",{className:"createListContainer"},s.a.createElement(C.a,{variant:"outlined",color:"primary",onClick:this.activateform,className:"createList"},"Cr\xe9er une playlist"),this.state.formisactiv&&s.a.createElement("form",{className:"createForm",onSubmit:this.searchPlaylist},s.a.createElement(O.a,{label:"Nom",name:"name",variant:"outlined",value:this.state.name,onChange:this.handleChange,className:"textfield"}),s.a.createElement(O.a,{label:"Description",name:"description",variant:"outlined",value:this.state.description,onChange:this.handleChange,className:"textfield"}),s.a.createElement(C.a,{type:"submit",variant:"outlined",color:"primary",className:"createButton"},"Valider")))}}]),a}(n.Component),A=a(163),x=a(164),T=a(165),I=a(173),w=a(166),B=(a(112),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({input:e.target.value})},n.addTracks=function(){n.setState({searchactivated:!0});var e=localStorage.access_token,t={headers:{Authorization:"Bearer ".concat(e)},params:{q:n.state.input,type:"artist,album,track"}};d.a.get("https://api.spotify.com/v1/search",t).then((function(e){console.log(e.data),n.setState({tracks:e.data.tracks.items,album:e.data.albums.items,artist:e.data.artists.items})}))},n.state={searchactivated:!1,input:"",tracks:[],album:[],artist:[]},n}return Object(m.a)(a,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.state.searchactivated&&""!==this.state.input&&this.state.tracks.length>2?s.a.createElement("div",{className:"globalSearchContainer"},s.a.createElement("div",{className:"searchContainer"},s.a.createElement(C.a,{variant:"outlined",color:"primary",onClick:this.addTracks},"Rechercher"),s.a.createElement(O.a,{id:"outlined-basic",label:"Album, Titre ou Artiste ",value:this.state.search,onChange:this.handleChange,className:"searchTextField"})),s.a.createElement("div",{className:"searchedColumns"},s.a.createElement("div",{className:"searchCategories"},s.a.createElement("h2",null,"Titres"),this.state.tracks.map((function(e,t){return s.a.createElement(A.a,null,s.a.createElement("ul",null,s.a.createElement(x.a,{textAlign:"center",key:t},s.a.createElement(T.a,{primary:e.name}))))}))),s.a.createElement("div",{className:"searchCategories"},s.a.createElement("h2",null,"Artistes"),this.state.artist.map((function(e,t){return s.a.createElement(A.a,null,s.a.createElement("ul",null,s.a.createElement(x.a,{textAlign:"center",key:t},s.a.createElement(T.a,{primary:e.name}))))}))),s.a.createElement("div",{className:"searchCategories"},s.a.createElement("h2",null,"Album"),this.state.album.map((function(e,t){return s.a.createElement(A.a,null,s.a.createElement("ul",null,s.a.createElement(x.a,{textAlign:"center",key:t},s.a.createElement(w.a,null,s.a.createElement(I.a,{src:e.images[2].url})),s.a.createElement(T.a,{primary:e.name}))))}))))):s.a.createElement("div",{className:"searchContainer"},s.a.createElement(C.a,{variant:"outlined",color:"primary",onClick:this.addTracks,className:"homePageSearchButton"},"Rechercher"),s.a.createElement(O.a,{id:"outlined-basic",label:"Album, Titre ou Artiste ",value:this.state.search,onChange:this.handleChange,className:"searchTextField"})))}}]),a}(n.Component)),P=(a(113),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={playlists:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.access_token,a=localStorage.id;if(t&&a){var n={headers:{Authorization:"Bearer ".concat(t)}};d.a.get("https://api.spotify.com/v1/users/"+a+"/playlists",n).then((function(t){console.log(t.data.items),e.setState({playlists:t.data.items})}))}else this.props.history.push("/auth")}},{key:"render",value:function(){return s.a.createElement("div",{className:"home_page"},s.a.createElement("h1",{className:"home_title"},"Bienvenue sur votre plateforme Spotify !"),s.a.createElement("div",{className:"home_content"},s.a.createElement("div",{className:"createPlaylistAndAlbums_list"},s.a.createElement("div",{className:"create_list"}," ",s.a.createElement(j,null)),s.a.createElement("div",{className:"albums_list"},this.state.playlists.map((function(e,t){return s.a.createElement(E.a,{key:t,style:{margin:"5px"},className:"card"},s.a.createElement(N.a,null,e.images[0]&&s.a.createElement(S.a,{image:e.images[0].url,className:"cardImageSize"}),s.a.createElement(k.a,null,s.a.createElement(y.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.name))),s.a.createElement(b.a,null,s.a.createElement(C.a,{className:"buttonToTracks",size:"small",color:"primary",onClick:function(){return window.location="/playlists?id="+e.id+"&artist="+e.name}},"Voir les titres")))})))),s.a.createElement("div",{className:"searchPlaylist"},s.a.createElement(B,null))))}}]),a}(n.Component)),z=a(67),L=a.n(z),F=(a(126),a(69)),q=(a(127),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({search:e.target.value})},n.handleSubmit=function(e){e.preventDefault();var t=localStorage.access_token,a={headers:{Authorization:"Bearer ".concat(t)},params:{q:n.state.search,type:"track",offset:n.state.offset,limit:50}};d.a.get("https://api.spotify.com/v1/search",a).then((function(e){console.log(e),n.setState({tracks:Object(F.a)(e.data.tracks.items),next:e.data.tracks.next,offset:n.state.offset})})).catch((function(e){e.response&&(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)),e.response&&e.response.status>=400?n.setState({isNotFound:!0}):e.request?console.log(e.request):console.log("Error",e.message)}))},n.addTrack=function(e){var t=localStorage.access_token,a={headers:{Authorization:"Bearer ".concat(t)},params:{uris:e.uri}};d.a.post("https://api.spotify.com/v1/playlists/"+n.props.playListId+"/tracks",{},a).then((function(e){console.log(e),n.props.refresh()}))},n.changeTracksOffsetPrev=function(e){0!==n.state.offset&&(n.setState({offset:n.state.offset-=50}),n.handleSubmit(e))},n.changeTracksOffsetNext=function(e){console.log("NEXT : "+n.state.next),n.state.isNotFound||(n.setState({offset:n.state.offset+=50}),n.handleSubmit(e))},n.state={searchActivated:!1,tracks:[],search:"",playListId:null,currentPage:1,offset:0,disabled:!1,next:"",isNotFound:!1},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return console.log(this.state.offset),s.a.createElement("div",{className:"newPlaylistPage"},s.a.createElement("form",{className:"searchForMyPlaylist",onSubmit:this.handleSubmit},s.a.createElement("label",{className:"spaceItemAndInput"},s.a.createElement("span",{className:"spaceItemAndInput_Item"},"Musique :"),s.a.createElement("input",{type:"text",onChange:this.handleChange})),s.a.createElement("input",{type:"submit",value:"Rechercher"})),this.state.tracks.length>2&&s.a.createElement("div",{className:"tracksList"},this.state.tracks.map((function(t,a){return s.a.createElement("div",{key:a,className:"tracks"},s.a.createElement(A.a,{component:"nav","aria-label":"main mailbox folders",style:{maxHeight:"200px",overflowY:"auto"}},s.a.createElement(x.a,null,s.a.createElement("div",{style:{display:"block"}},s.a.createElement(T.a,{primary:"Titre : "+t.name}),s.a.createElement(T.a,{primary:"Artiste(s) : "+t.artists[0].name})),s.a.createElement(w.a,null,s.a.createElement(I.a,{alt:t.album.name,src:t.album.images[2].url})),s.a.createElement("div",{style:{right:"5px"}},s.a.createElement("button",{onClick:function(){return e.addTrack(t)}},"+")))))})),s.a.createElement("div",{className:"buttons_container"},s.a.createElement("button",{onClick:this.changeTracksOffsetPrev,disabled:0==this.state.offset,className:"prev"},"Pr\xe9c\xe9dent"),s.a.createElement("button",{onClick:this.changeTracksOffsetNext,disabled:this.state.isNotFound,className:"next"},"Suivant"))))}}]),a}(n.Component)),M=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).refresh=function(){var e=localStorage.access_token,t={headers:{Authorization:"Bearer ".concat(e)}},a=L.a.parse(n.props.location.search);n.setState({playListId:a.id,artist:a.artist}),console.log("PARAMS",a),d.a.get("https://api.spotify.com/v1/playlists/"+a.id+"/tracks",t).then((function(e){n.setState({musics:e.data.items}),console.log(n.state.musics)}))},n.deleteTrack=function(e,t){console.log("Index "+e+" Id "+t.track.id+"  Uri "+t.track.uri);var a=t.track.id,s=t.track.uri,r=localStorage.access_token,c={headers:{Authorization:"Bearer ".concat(r),"Content-type":"application/json"}};return console.log(c),fetch("https://api.spotify.com/v1/playlists/".concat(a,"/tracks"),{method:"delete",config:c,body:{tracks:[{uri:s,positions:e}]}}).then((function(e){var t=e.json();console.log(t),n.setState({musics:n.state.musics.filter((function(e){return e.track!==a}))})})).catch((function(e){e.response&&(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)),e.response&&e.response.status>=400?n.setState({isNotFound:!0}):e.request?console.log(e.request):console.log("Error",e.message)}))},n.state={musics:[],artist:"",playListId:null},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"playListPage"},s.a.createElement(q,{playListId:this.state.playListId,refresh:this.refresh}),s.a.createElement("h1",{className:"playlistTitle"},"Contenu de la playlist ",this.state.artist),s.a.createElement("ul",null,this.state.musics.map((function(t,a){return s.a.createElement("div",{key:a},t.track.name,s.a.createElement("button",{key:a,onClick:function(){return e.deleteTrack(a,t)}},"X"))}))))}}]),a}(n.Component);var D=function(){return s.a.createElement("div",{className:"app_container"},s.a.createElement(l.a,null,s.a.createElement("div",{className:"app_page"},s.a.createElement(i.c,null,s.a.createElement(i.a,{path:"/home",component:P}),s.a.createElement(i.a,{path:"/playlists",component:M}),s.a.createElement(i.a,{path:"/",component:g})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,a){e.exports=a.p+"static/media/logo_spotify.7bcb5a3f.png"},83:function(e,t,a){e.exports=a(130)},88:function(e,t,a){},89:function(e,t,a){}},[[83,1,2]]]);
//# sourceMappingURL=main.47b86ff2.chunk.js.map